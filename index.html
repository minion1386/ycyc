<!DOCTYPE html>
<!-- saved from url=(0019)https://haikui.xyz/ -->
<html lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸‰è§’æ´²ç§Ÿå·ä¼°ä»·è¡¨</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #f0f9f0 0%, #e8f5e8 50%, #c8e6c9 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 700px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(76, 175, 80, 0.2);
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(76, 175, 80, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #b0f0b2 0%, #66bb6a 100%);
            color: white;
            padding: 30px 25px;
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .logo-container {
            flex-shrink: 0;
        }

        .logo {
            width: 60px;
            height: 60px;
            object-fit: contain;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .title-container {
            text-align: center;
            flex: 1;
            min-width: 200px;
        }

        .header h1 {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 10px;
            letter-spacing: 0.5px;
        }

        .header p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 16px;
            font-weight: 400;
        }

        .form-container {
            padding: 30px 25px;
            background: white;
            position: relative;
        }

        .name-logo-container {
            position: absolute;
            top: 0px;
            left: 20px;
            z-index: 10;
        }

        .name-logo {
            width: 80px;
            height: 40px;
            object-fit: contain;
            /* border-radius: 6px; */
            /* box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); */
            padding: 1px;
        }

        .form-group {
            margin-bottom: 24px;
        }

        .form-group label {
            display: inline-block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #000000;
            font-size: 14px;
            letter-spacing: 0.3px;
            position: relative;
            z-index: 2;
        }

        .form-group label::after {
            content: '';
            position: absolute;
            bottom: 2px;
            left: -6px;
            right: -6px;
            height: 7px;
            background: linear-gradient(90deg, rgba(50, 215, 140,0.5) 0%, rgba(50, 215, 140,0.5) 100%);
            border-radius: 2px;
            z-index: -1;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e8f5e8;
            border-radius: 8px;
            font-size: 15px;
            font-family: 'Inter', sans-serif;
            transition: all 0.2s ease;
            background: #fafafa;
            color: #333;
        }

        /* å¤šé€‰æ¡†ç‰¹æ®Šæ ·å¼ */
        .form-group select[multiple] {
            min-height: 120px;
            overflow-y: auto;
        }

        .form-group select[multiple] option {
            padding: 8px 12px;
            border-radius: 4px;
            margin: 2px 0;
            cursor: pointer;
        }

        .form-group select[multiple] option:checked {
            background: linear-gradient(135deg, #b0f0b2 0%, #66bb6a 100%);
            color: white;
            font-weight: 500;
        }

        .form-group select[multiple] option:hover {
            background: rgba(76, 175, 80, 0.1);
        }

        /* è‡ªå®šä¹‰å¤šé€‰ä¸‹æ‹‰æ¡†æ ·å¼ */
        .custom-multiselect {
            position: relative;
            width: 100%;
        }

        .multiselect-display {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e8f5e8;
            border-radius: 8px;
            font-size: 15px;
            font-family: 'Inter', sans-serif;
            background: #fafafa;
            color: #333;
            cursor: pointer;
            transition: all 0.2s ease;
            min-height: 48px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .multiselect-display:hover {
            border-color: #4caf50;
            background: white;
        }

        .multiselect-display.active {
            border-color: #4caf50;
            background: white;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .multiselect-selected {
            flex: 1;
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .multiselect-tag {
            background: linear-gradient(135deg, #b0f0b2 0%, #66bb6a 100%);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 13px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .multiselect-tag .remove {
            cursor: pointer;
            font-weight: bold;
            font-size: 12px;
        }

        .multiselect-placeholder {
            color: #9e9e9e;
            font-style: italic;
        }

        .multiselect-arrow {
            margin-left: 8px;
            font-size: 12px;
            color: #666;
            transition: transform 0.2s ease;
        }

        .multiselect-arrow.open {
            transform: rotate(180deg);
        }

        .multiselect-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid #4caf50;
            border-top: none;
            border-radius: 0 0 8px 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            max-height: 200px;
            overflow-y: auto;
            display: none;
        }

        .multiselect-dropdown.show {
            display: block;
        }

        .multiselect-option {
            padding: 12px 16px;
            cursor: pointer;
            border-bottom: 1px solid #f0f0f0;
            transition: background-color 0.2s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .multiselect-option:hover {
            background: rgba(76, 175, 80, 0.1);
        }

        .multiselect-option.selected {
            background: rgba(76, 175, 80, 0.2);
            font-weight: 500;
        }

        .multiselect-option input[type="checkbox"] {
            width: auto;
            margin: 0;
            padding: 0;
        }

        .form-group input::placeholder, .form-group textarea::placeholder {
            color: #9e9e9e;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #4caf50;
            background: white;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        /* AWMå­—æ®µç‰¹æ®Šå­—ä½“æ ·å¼ */
        #awm {
            font-family: "Microsoft YaHei", "å¾®è½¯é›…é»‘", sans-serif !important;
        }
        
        /* AWMæ ‡ç­¾å­—ä½“æ ·å¼ */
        label[for="awm"] {
            font-family: "Microsoft YaHei", "å¾®è½¯é›…é»‘", sans-serif !important;
        }
        
        /* æ¸©é¦¨æç¤ºæ ·å¼ */
        .tip-text {
            font-size: 12px;
            color: #ff9800;
            margin-top: 6px;
            font-style: italic;
            opacity: 0.8;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .copy-btn {
            width: 100%;
            background: linear-gradient(135deg, #b0f0b2 0%, #66bb6a 100%);
            color: white;
            border: none;
            padding: 16px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            font-family: 'Inter', sans-serif;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-top: 25px;
            letter-spacing: 0.5px;
            /* iOSè§¦æ‘¸ä¼˜åŒ– */
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
            touch-action: manipulation;
        }

        .copy-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.3);
            background: linear-gradient(135deg, #b0f0b2 0%, #5cb85c 100%);
        }

        .copy-btn:active {
            transform: translateY(0);
        }

        /* iOSè§¦æ‘¸çŠ¶æ€æ ·å¼ */
        .copy-btn:active,
        .copy-btn:focus {
            transform: scale(0.98);
            outline: none;
        }

        .success-message {
            background: rgba(76, 175, 80, 0.1);
            color: #2e7d32;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            text-align: center;
            display: none;
            border: 1px solid rgba(76, 175, 80, 0.2);
            font-weight: 500;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .container {
                border-radius: 12px;
            }
            
            .header {
                padding: 25px 20px;
            }

            .header-content {
                flex-direction: column;
                gap: 15px;
            }

            .logo {
                width: 50px;
                height: 50px;
            }

            .title-container {
                min-width: auto;
            }
            
            .header h1 {
                font-size: 22px;
                letter-spacing: 0.3px;
            }
            
            .form-container {
                padding: 25px 20px;
            }

            .name-logo-container {
                top: 12px;
                left: 20px;
            }

            .name-logo {
                width: 70px;
                height: 35px;
            }
            
            .form-row {
                grid-template-columns: 1fr;
                gap: 0;
            }
            
            .form-group input, .form-group textarea, .form-group select {
                font-size: 16px;
                padding: 12px 16px;
            }
            
            .copy-btn {
                font-size: 16px;
                padding: 16px;
            }
        }
    </style>
</head>
<body cz-shortcut-listen="true">
    <div class="container">
        <div class="header">
            <div class="header-content">
                <div class="title-container">
                    <h1>ä¸‰è§’æ´²ç§Ÿå·ä¼°ä»·è¡¨</h1>
                    <p>å¡«å†™è´¦å·ä¿¡æ¯ï¼Œä¸€é”®å¤åˆ¶åˆ°å‰ªåˆ‡æ¿</p>
                </div>
            </div>
        </div>
        
        <div class="form-container">
            <form id="gameForm">
                <div class="form-group">
                    <label for="loginMethod">ä¸Šå·æ–¹å¼</label>
                    <select id="loginMethod" name="loginMethod">
                        <option value="" disabled="" selected="">è¯·é€‰æ‹©ä¸Šå·æ–¹å¼</option>
                        <option value="QQè´¦å·å¯†ç ">QQè´¦å·å¯†ç </option>
                        <option value="QQæ‰«ç ">QQæ‰«ç </option>
                        <option value="VXæ‰«ç ">VXæ‰«ç </option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="rank">æ®µä½</label>
                    <select id="rank" name="rank">
                        <option value="" disabled="" selected="">è¯·é€‰æ‹©æ®µä½</option>
                        <option value="é’é“œ">é’é“œ</option>
                        <option value="ç™½é“¶">ç™½é“¶</option>
                        <option value="é»„é‡‘">é»„é‡‘</option>
                        <option value="é“‚é‡‘">é“‚é‡‘</option>
                        <option value="é’»çŸ³">é’»çŸ³</option>
                        <option value="é»‘é¹°">é»‘é¹°</option>
                        <option value="å·…å³°">å·…å³°</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="kd">ç»å¯†KD</label>
                    <input type="text" id="kd" name="kd" placeholder="è¯·è¾“å…¥ç»å¯†KD">
                </div>

                <div class="form-group">
                    <label for="hafuCoin">å“ˆå¤«å¸çº¯å¸(å•ä½Mï¼Œ1M=100W)</label>
                    <input type="text" id="hafuCoin" name="hafuCoin" placeholder="è¯·è¾“å…¥å“ˆå¤«å¸æ•°é‡ï¼Œä¿ç•™å°æ•°ç‚¹åä¸€ä½" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" onblur="this.value = parseFloat(this.value || 0).toFixed(1);">
                    <div class="tip-text">æ¸©é¦¨æç¤º:çº¯å¸å°äº20Mæ— æ³•å¯„å”®ç§Ÿèµ</div>
                </div>

                <div class="form-group">
                    <label for="level">ç­‰çº§</label>
                    <input type="text" id="level" name="level" placeholder="è¯·è¾“å…¥ç­‰çº§">
                </div>

                <div class="form-group">
                    <label for="insuranceSlots">ä¿é™©æ ¼æ•°</label>
                    <select id="insuranceSlots" name="insuranceSlots">
                        <option value="" disabled="" selected="">è¯·é€‰æ‹©ä¿é™©æ ¼æ•°</option>
                        <option value="2">2æ ¼</option>
                        <option value="4">4æ ¼</option>
                        <option value="6">6æ ¼</option>
                        <option value="9">9æ ¼</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="stamina">ä½“åŠ›(è®­ç»ƒä¸­å¿ƒ)</label>
                    <input type="text" id="stamina" name="stamina" placeholder="è¯·è¾“å…¥ä½“åŠ›" value="0">
                </div>

                <div class="form-group">
                    <label for="weight">è´Ÿé‡(é¶åœºç­‰çº§)</label>
                    <input type="text" id="weight" name="weight" placeholder="è¯·è¾“å…¥è´Ÿé‡" value="0">
                </div>

                <div class="form-group">
                    <label for="awm">AWMå­å¼¹æ•°é‡</label>
                    <input type="text" id="awm" name="awm" placeholder="è¯·è¾“å…¥AWMä¿¡æ¯">
                    <div class="tip-text">
                        æ¸©é¦¨æç¤º:ä»“åº“æ‰“æ‰‹ç”¨å®Œå·ä¸»éªŒå·å•ç‹¬è®¡è´¹ï¼š<br>
                        6å¥—æŒ‰ç…§å¤´2ç±³ç”²3ç±³<br>
                        6çº§å¼¹16ç±³/1ç»„ï¼›AWM1ç±³/1å‘<br>
                        é™¤äº†6å¤´6ç”²Aå¤§é‡‘å¼¹è¿˜æœ‰çºªå¿µç‰©å“è‡ªå·±æå‰æˆªå›¾ä¿ç•™ä»“åº“å…¶ä½™éƒ½ç®—èµ é€
                    </div>
                </div>

                <div class="form-group">
                    <label for="helmet6">6å¤´æ•°é‡</label>
                    <input type="text" id="helmet6" name="helmet6" placeholder="è¯·è¾“å…¥6å¤´ä¿¡æ¯">
                </div>

                <div class="form-group">
                    <label for="armor6">6ç”²æ•°é‡</label>
                    <input type="text" id="armor6" name="armor6" placeholder="è¯·è¾“å…¥6ç”²ä¿¡æ¯">
                </div>

                <div class="form-group">
                    <label for="knifeSkins">åˆ€çš®(æœ‰çš„è¯å›æ”¶æ¯”ä¾‹-1)</label>
                    <div class="custom-multiselect" data-name="knifeSkins">
                        <div class="multiselect-display" onclick="toggleMultiselect(this)">
                            <div class="multiselect-selected">
                                <span class="multiselect-placeholder">è¯·é€‰æ‹©åˆ€çš®</span>
                            </div>
                            <span class="multiselect-arrow">â–¼</span>
                        </div>
                        <div class="multiselect-dropdown">
                            <div class="multiselect-option" onclick="selectOption(this, 'èµ¤é›·')">
                                <input type="checkbox" value="èµ¤é›·">
                                <span>èµ¤é›·</span>
                            </div>
                            <div class="multiselect-option" onclick="selectOption(this, 'æ€œæ‚¯')">
                                <input type="checkbox" value="æ€œæ‚¯">
                                <span>æ€œæ‚¯</span>
                            </div>
                            <div class="multiselect-option" onclick="selectOption(this, 'å½±é”‹')">
                                <input type="checkbox" value="å½±é”‹">
                                <span>å½±é”‹</span>
                            </div>
                            <div class="multiselect-option" onclick="selectOption(this, 'é»‘æµ·')">
                                <input type="checkbox" value="é»‘æµ·">
                                <span>é»‘æµ·</span>
                            </div>
                            <div class="multiselect-option" onclick="selectOption(this, 'åŒ—ææ˜Ÿ')">
                                <input type="checkbox" value="åŒ—ææ˜Ÿ">
                                <span>åŒ—ææ˜Ÿ</span>
                            </div>
                        </div>
                    </div>
                    <div class="tip-text">
                        psï¼šæœ‰äººé—®æ€ä¹ˆæœ‰çš®è‚¤å›æ”¶æ¯”ä¾‹è¿˜ä½äº†ï¼è¿™æ˜¯é™¤æ³•ï¼Œé™¤æ•°è¶Šå°å›æ”¶ä»·è¶Šé«˜~
                    </div>
                </div>

                <div class="form-group">
                    <label for="operatorSkins">å¹²å‘˜çº¢çš®(æœ‰çš„è¯å›æ”¶æ¯”ä¾‹-1)</label>
                    <div class="custom-multiselect" data-name="operatorSkins">
                        <div class="multiselect-display" onclick="toggleMultiselect(this)">
                            <div class="multiselect-selected">
                                <span class="multiselect-placeholder">è¯·é€‰æ‹©å¹²å‘˜çº¢çš®</span>
                            </div>
                            <span class="multiselect-arrow">â–¼</span>
                        </div>
                        <div class="multiselect-dropdown">
                            <div class="multiselect-option" onclick="selectOption(this, 'èš€é‡‘ç«ç‘°')">
                                <input type="checkbox" value="èš€é‡‘ç«ç‘°">
                                <span>èš€é‡‘ç«ç‘°</span>
                            </div>
                            <div class="multiselect-option" onclick="selectOption(this, 'æ°´å¢¨äº‘å›¾')">
                                <input type="checkbox" value="æ°´å¢¨äº‘å›¾">
                                <span>æ°´å¢¨äº‘å›¾</span>
                            </div>
                            <div class="multiselect-option" onclick="selectOption(this, 'åˆå¤œé‚®å·®')">
                                <input type="checkbox" value="åˆå¤œé‚®å·®">
                                <span>åˆå¤œé‚®å·®</span>
                            </div>
                            <div class="multiselect-option" onclick="selectOption(this, 'å¤©é™…çº¿')">
                                <input type="checkbox" value="å¤©é™…çº¿">
                                <span>å¤©é™…çº¿</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="deposit">æŠ¼é‡‘ï¼ˆç§Ÿå®¢ç¼´çº³ï¼Œå°å·èµ”å¿ç”¨ï¼Œå·ä¸»å¿…å¡«ï¼‰</label>
                    <input type="text" id="deposit" name="deposit" placeholder="è¯·è¾“å…¥æŠ¼é‡‘é‡‘é¢">
                </div>

                <div class="form-group">
                    <label for="onlineTime">å·ä¸»åœ¨çº¿æ—¶é—´ï¼ˆéœ€é…åˆäººè„¸éªŒè¯ï¼ï¼‰</label>
                    <input type="text" id="onlineTime" name="onlineTime" placeholder="è¯·è¾“å…¥åœ¨çº¿æ—¶é—´">
                </div>

                <div class="form-group">
                    <label for="banRecord">å°ç¦è®°å½•(æ²¡æœ‰å¯ä¸å¡«å†™)</label>
                    <textarea id="banRecord" name="banRecord" placeholder="è¯·è¾“å…¥å°ç¦è®°å½•"></textarea>
                </div>

                <div class="form-group">
                    <label for="rentalDays">ç§ŸæœŸï¼ˆå¤©ï¼‰</label>
                    <input type="text" id="rentalDays" name="rentalDays" placeholder="è‡ªåŠ¨è®¡ç®—" readonly="">
                    <div class="tip-text">
                        psï¼šä¾‹å¦‚100Mçš„å·ï¼Œæœ€å¤šåªä¼šè¢«å‡ºç§Ÿ10å¤©ï¼Œè¶…è¿‡ç§ŸæœŸæŒ‰ç…§å‡ºç§Ÿé‡‘é¢å…¨é¢ç»“è´¦
                    </div>
                </div>

                <div class="form-group">
                    <label for="phone">è”ç³»å·ç </label>
                    <input type="tel" id="phone" name="phone" placeholder="è¯·è¾“å…¥è”ç³»å·ç ">
                </div>

                <div class="form-group">
                    <label for="ratio">å›æ”¶æ¯”ä¾‹ï¼ˆæ ¹æ®ä¿é™©ç³»æ•°ã€ä½“åŠ›ã€è´Ÿé‡è®¡ç®—å¾—å‡ºï¼‰</label>
                    <input type="text" id="ratio" name="ratio" placeholder="è‡ªåŠ¨è®¡ç®—" readonly="">
                </div>

                <div class="form-group">
                    <label for="rent">å›æ”¶ç§Ÿé‡‘ï¼ˆæ ¹æ®å“ˆå¤«å¸çº¯å¸ã€æ¯”ä¾‹è®¡ç®—å¾—å‡ºï¼‰</label>
                    <input type="text" id="rent" name="rent" placeholder="è‡ªåŠ¨è®¡ç®—" readonly="">
                </div>

                <button type="button" class="copy-btn" onclick="copyToClipboard()" ontouchstart="this.style.transform='scale(0.95)'" ontouchend="this.style.transform=''">
                    ğŸš€ å¤åˆ¶åˆ°å‰ªåˆ‡æ¿
                </button>
            </form>


        </div>
    </div>



    <script>
        // æ¯”ä¾‹è®¡ç®—é€»è¾‘ï¼ˆç§»åŠ¨åˆ°å‰é¢ä¼˜å…ˆå®šä¹‰ï¼‰
        function calculateRatio() {
            const insuranceSlots = document.getElementById('insuranceSlots')?.value;
            const stamina = document.getElementById('stamina')?.value;
            const weight = document.getElementById('weight')?.value;
            const hafuCoin = document.getElementById('hafuCoin')?.value;
            const ratioInput = document.getElementById('ratio');
            
            if (!ratioInput) {
                console.log('æ¯”ä¾‹è¾“å…¥æ¡†æœªæ‰¾åˆ°');
                return;
            }
            
            // æ£€æŸ¥æ˜¯å¦æ‰€æœ‰å¿…è¦å­—æ®µéƒ½å·²å¡«å†™
            if (!insuranceSlots || !stamina || !weight) {
                ratioInput.value = '';
                console.log('å¿…è¦å­—æ®µæœªå¡«å†™å®Œæ•´:', { insuranceSlots, stamina, weight });
                return;
            }
            
            // æ„å»ºæŸ¥è¯¢é”®
            const key = insuranceSlots + stamina + weight;
            console.log('è®¡ç®—æ¯”ä¾‹ - æŸ¥è¯¢é”®:', key);
            
            // æ¯”ä¾‹å¯¹åº”è¡¨
            const ratioTable = {
                '977': '1:33.5', '976': '1:34', '975': '1:34', '974': '1:34.5', '973': '1:35',
                '967': '1:34', '966': '1:34', '965': '1:34.5', '964': '1:34.5', '963': '1:35',
                '957': '1:34.5', '956': '1:35', '955': '1:35', '954': '1:35.5', '953': '1:35.5',
                '947': '1:35.5', '946': '1:35.5', '945': '1:36', '944': '1:36', '943': '1:36',
                '937': '1:36', '936': '1:36', '935': '1:36.5', '934': '1:36.5', '933': '1:36.5',
                '677': '1:36', '676': '1:36', '675': '1:37', '674': '1:37', '673': '1:37',
                '667': '1:36', '666': '1:36.5', '665': '1:36.5', '664': '1:36.5', '663': '1:36.5',
                '657': '1:37', '656': '1:37', '655': '1:37', '654': '1:37', '653': '1:37',
                '647': '1:37.5', '646': '1:37.5', '645': '1:37.5', '644': '1:37.5', '643': '1:37.5',
                '637': '1:37.5', '636': '1:37.5', '635': '1:37.5', '634': '1:37.5', '633': '1:37.5',
                '477': '1:37', '476': '1:37', '475': '1:37', '474': '1:37', '473': '1:37.5',
                '467': '1:37.5', '466': '1:37.5', '465': '1:37.5', '464': '1:37.5', '463': '1:37.5',
                '457': '1:38', '456': '1:38', '455': '1:39', '454': '1:38', '453': '1:38',
                '447': '1:38.5', '446': '1:38.5', '445': '1:38.5', '444': '1:38.5', '443': '1:38.5', 
                '442': '1:38.5', '433': '1:38.5'
            };
            
            // æŸ¥æ‰¾å¯¹åº”çš„æ¯”ä¾‹
            let ratio = ratioTable[key];
            if (!ratio) {
                // å¦‚æœæœªæ‰¾åˆ°å¯¹åº”æ¯”ä¾‹ï¼Œæ ¹æ®ä¿é™©æ ¼æ•°è®¾ç½®é»˜è®¤æ¯”ä¾‹
                const defaultRatioTable = {
                    '2': '1:42',
                    '4': '1:40',
                    '6': '1:38.5',
                    '9': '1:37'
                };
                ratio = defaultRatioTable[insuranceSlots];
                if (!ratio) {
                    ratioInput.value = 'æœªæ‰¾åˆ°å¯¹åº”æ¯”ä¾‹';
                    return;
                }
            }
            
            // æ ¹æ®å“ˆå¤«å¸æ•°é‡è°ƒæ•´æ¯”ä¾‹
            if (hafuCoin && parseFloat(hafuCoin) > 0) {
                const hafuCoinValue = parseFloat(hafuCoin);
                
                // å¦‚æœå“ˆå¤«å¸å°äº130ï¼Œæˆ–è€…æœªå¡«å†™æ—¶ï¼Œåˆ™æ¯”ä¾‹è¿˜æ˜¯æŒ‰åŸæ¥çš„æ¯”ä¾‹
                if (hafuCoinValue >= 130) {
                    // ä»æ¯”ä¾‹ä¸­æå–å³è¾¹çš„æ•°å­—
                    const ratioMatch = ratio.match(/1:(\d+(?:\.\d+)?)/); 
                    if (ratioMatch) {
                        let ratioValue = parseFloat(ratioMatch[1]);
                        
                        if (hafuCoinValue >= 230) {
                            // å¦‚æœå“ˆå¤«å¸å¤§äº230ï¼Œåˆ™æ¯”ä¾‹å³è¾¹è¦åŠ 1.5
                            ratioValue += 1.5;
                        } else if (hafuCoinValue >= 130) {
                            // å¦‚æœå“ˆå¤«å¸å¤§äº130ï¼Œåˆ™æ¯”ä¾‹å³è¾¹è¦åŠ 1
                            ratioValue += 1;
                        }
                        
                        // é‡æ–°æ„å»ºæ¯”ä¾‹å­—ç¬¦ä¸²
                        ratio = '1:' + ratioValue;
                    }
                }
            }
            
            // æ£€æŸ¥çš®è‚¤é€‰æ‹©æƒ…å†µå¹¶è°ƒæ•´æ¯”ä¾‹
            const knifeSkins = getMultiselectValues('knifeSkins');
            const operatorSkins = getMultiselectValues('operatorSkins');
            
            console.log('è®¡ç®—æ¯”ä¾‹ - çš®è‚¤é€‰æ‹©æƒ…å†µ:', {
                knifeSkins: knifeSkins,
                operatorSkins: operatorSkins,
                beforeAdjustment: ratio
            });
            
            // ä»æ¯”ä¾‹ä¸­æå–å³è¾¹çš„æ•°å­—è¿›è¡Œçš®è‚¤è°ƒæ•´
            const finalRatioMatch = ratio.match(/1:(\d+(?:\.\d+)?)/); 
            if (finalRatioMatch) {
                let finalRatioValue = parseFloat(finalRatioMatch[1]);
                let adjustments = [];
                
                // å¦‚æœé€‰æ‹©äº†åˆ€çš®ï¼Œæ¯”ä¾‹å³è¾¹å‡1
                if (knifeSkins.length > 0) {
                    finalRatioValue -= 1;
                    adjustments.push('åˆ€çš®-1');
                }
                
                // å¦‚æœé€‰æ‹©äº†å¹²å‘˜çº¢çš®ï¼Œæ¯”ä¾‹å³è¾¹å‡1
                if (operatorSkins.length > 0) {
                    finalRatioValue -= 1;
                    adjustments.push('å¹²å‘˜çº¢çš®-1');
                }
                
                // ç¡®ä¿æ¯”ä¾‹ä¸ä¼šå˜æˆè´Ÿæ•°æˆ–è¿‡å°
                if (finalRatioValue < 1) {
                    finalRatioValue = 1;
                    adjustments.push('æœ€å°å€¼é™åˆ¶ä¸º1');
                }
                
                // é‡æ–°æ„å»ºæœ€ç»ˆæ¯”ä¾‹å­—ç¬¦ä¸²
                ratio = '1:' + finalRatioValue;
                
                console.log('æ¯”ä¾‹è°ƒæ•´ç»“æœ:', {
                    adjustments: adjustments,
                    finalRatio: ratio
                });
            }
            
            ratioInput.value = ratio;
            console.log('æ¯”ä¾‹è®¡ç®—å®Œæˆï¼Œè®¾ç½®å€¼ä¸º:', ratio);
        }
        
        // ç§ŸæœŸè®¡ç®—é€»è¾‘
        function calculateRentalDays() {
            const hafuCoin = document.getElementById('hafuCoin')?.value;
            const rentalDaysInput = document.getElementById('rentalDays');
            
            if (!rentalDaysInput) {
                console.log('ç§ŸæœŸè¾“å…¥æ¡†æœªæ‰¾åˆ°');
                return;
            }
            
            // æ£€æŸ¥å“ˆå¤«å¸æ˜¯å¦å·²å¡«å†™
            if (!hafuCoin || parseFloat(hafuCoin) <= 0) {
                rentalDaysInput.value = '';
                console.log('å“ˆå¤«å¸æœªå¡«å†™æˆ–ä¸º0:', hafuCoin);
                return;
            }
            
            const hafuCoinValue = parseFloat(hafuCoin);
            // è®¡ç®—ç§ŸæœŸï¼šå“ˆå¤«å¸çº¯å¸ / 10ï¼Œä¿ç•™æ•´æ•°éƒ¨åˆ†
            const rentalDays = Math.floor(hafuCoinValue / 10);
            
            rentalDaysInput.value = rentalDays;
            console.log('ç§ŸæœŸè®¡ç®—å®Œæˆï¼Œè®¾ç½®å€¼ä¸º:', rentalDays);
        }
        
        // è·å–å¤šé€‰æ¡†çš„å€¼ï¼ˆç§»åŠ¨åˆ°å‰é¢ä¼˜å…ˆå®šä¹‰ï¼‰
        function getMultiselectValues(name) {
            const multiselect = document.querySelector(`[data-name="${name}"]`);
            if (!multiselect) {
                console.log(`å¤šé€‰æ¡† ${name} æœªæ‰¾åˆ°`);
                return [];
            }
            
            const selectedOptions = multiselect.querySelectorAll('input[type="checkbox"]:checked');
            const values = Array.from(selectedOptions).map(cb => cb.value);
            console.log(`è·å– ${name} çš„é€‰ä¸­å€¼:`, values);
            return values;
        }
        
        // è‡ªå®šä¹‰å¤šé€‰ä¸‹æ‹‰æ¡†åŠŸèƒ½
        function toggleMultiselect(display) {
            const dropdown = display.nextElementSibling;
            const arrow = display.querySelector('.multiselect-arrow');
            const isOpen = dropdown.classList.contains('show');
            
            // å…³é—­æ‰€æœ‰å…¶ä»–ä¸‹æ‹‰æ¡†
            document.querySelectorAll('.multiselect-dropdown.show').forEach(dd => {
                if (dd !== dropdown) {
                    dd.classList.remove('show');
                    dd.previousElementSibling.classList.remove('active');
                    dd.previousElementSibling.querySelector('.multiselect-arrow').classList.remove('open');
                }
            });
            
            if (isOpen) {
                dropdown.classList.remove('show');
                display.classList.remove('active');
                arrow.classList.remove('open');
            } else {
                dropdown.classList.add('show');
                display.classList.add('active');
                arrow.classList.add('open');
            }
        }
        
        function selectOption(optionElement, value) {
            event.stopPropagation();
            
            const checkbox = optionElement.querySelector('input[type="checkbox"]');
            const multiselect = optionElement.closest('.custom-multiselect');
            const display = multiselect.querySelector('.multiselect-display');
            const selectedContainer = display.querySelector('.multiselect-selected');
            
            // åˆ‡æ¢é€‰ä¸­çŠ¶æ€
            checkbox.checked = !checkbox.checked;
            
            if (checkbox.checked) {
                optionElement.classList.add('selected');
            } else {
                optionElement.classList.remove('selected');
            }
            
            // æ›´æ–°æ˜¾ç¤º
            updateMultiselectDisplay(multiselect);
            
            // ä¿å­˜åˆ°localStorage
            saveMultiselectToStorage(multiselect);
            
            // é‡æ–°è®¡ç®—æ¯”ä¾‹å’Œç§Ÿé‡‘
            console.log('çš®è‚¤é€‰æ‹©å‘ç”Ÿå˜åŒ–ï¼Œé‡æ–°è®¡ç®—æ¯”ä¾‹', {
                knifeSkins: getMultiselectValues('knifeSkins'),
                operatorSkins: getMultiselectValues('operatorSkins')
            });
            // ä½¿ç”¨setTimeoutç¡®ä¿DOMæ›´æ–°å®Œæˆåå†è®¡ç®—
            setTimeout(() => {
                calculateRatio();
                setTimeout(calculateRent, 100);
            }, 10);
        }
        
        function removeTag(tagElement, value) {
            event.stopPropagation();
            
            const multiselect = tagElement.closest('.custom-multiselect');
            const option = multiselect.querySelector(`input[value="${value}"]`).parentElement;
            const checkbox = option.querySelector('input[type="checkbox"]');
            
            checkbox.checked = false;
            option.classList.remove('selected');
            
            updateMultiselectDisplay(multiselect);
            saveMultiselectToStorage(multiselect);
            
            // é‡æ–°è®¡ç®—æ¯”ä¾‹å’Œç§Ÿé‡‘
            console.log('çš®è‚¤æ ‡ç­¾è¢«ç§»é™¤ï¼Œé‡æ–°è®¡ç®—æ¯”ä¾‹', {
                removedValue: value,
                knifeSkins: getMultiselectValues('knifeSkins'),
                operatorSkins: getMultiselectValues('operatorSkins')
            });
            // ä½¿ç”¨setTimeoutç¡®ä¿DOMæ›´æ–°å®Œæˆåå†è®¡ç®—
            setTimeout(() => {
                calculateRatio();
                setTimeout(calculateRent, 100);
            }, 10);
        }
        
        function updateMultiselectDisplay(multiselect) {
            const selectedContainer = multiselect.querySelector('.multiselect-selected');
            const selectedOptions = multiselect.querySelectorAll('input[type="checkbox"]:checked');
            const placeholder = multiselect.querySelector('.multiselect-placeholder');
            
            // æ¸…ç©ºå®¹å™¨
            selectedContainer.innerHTML = '';
            
            if (selectedOptions.length === 0) {
                // æ˜¾ç¤ºå ä½ç¬¦
                const name = multiselect.getAttribute('data-name');
                const placeholderText = name === 'knifeSkins' ? 'è¯·é€‰æ‹©åˆ€çš®' : 'è¯·é€‰æ‹©å¹²å‘˜çº¢çš®';
                selectedContainer.innerHTML = `<span class="multiselect-placeholder">${placeholderText}</span>`;
            } else {
                // æ˜¾ç¤ºé€‰ä¸­çš„æ ‡ç­¾
                selectedOptions.forEach(checkbox => {
                    const tag = document.createElement('div');
                    tag.className = 'multiselect-tag';
                    tag.innerHTML = `
                        <span>${checkbox.value}</span>
                        <span class="remove" onclick="removeTag(this, '${checkbox.value}')">Ã—</span>
                    `;
                    selectedContainer.appendChild(tag);
                });
            }
        }
        
        function saveMultiselectToStorage(multiselect) {
            const name = multiselect.getAttribute('data-name');
            const selectedOptions = multiselect.querySelectorAll('input[type="checkbox"]:checked');
            const values = Array.from(selectedOptions).map(cb => cb.value);
            localStorage.setItem(name, JSON.stringify(values));
        }
        

        // ç‚¹å‡»å¤–éƒ¨å…³é—­ä¸‹æ‹‰æ¡†
        document.addEventListener('click', function(event) {
            if (!event.target.closest('.custom-multiselect')) {
                document.querySelectorAll('.multiselect-dropdown.show').forEach(dropdown => {
                    dropdown.classList.remove('show');
                    dropdown.previousElementSibling.classList.remove('active');
                    dropdown.previousElementSibling.querySelector('.multiselect-arrow').classList.remove('open');
                });
            }
        });
        
        function copyToClipboard() {
            // é˜²æ­¢é‡å¤è§¦å‘
            if (window.isCopying) {
                console.log('å¤åˆ¶æ“ä½œæ­£åœ¨è¿›è¡Œä¸­ï¼Œè¯·ç¨å€™...');
                return;
            }
            
            window.isCopying = true;
            
            const form = document.getElementById('gameForm');
            const formData = new FormData(form);
            let result = '';
            
            // æ”¶é›†åˆ€çš®é€‰æ‹©é¡¹
            const knifeSkins = getMultiselectValues('knifeSkins');
            
            // æ”¶é›†å¹²å‘˜çº¢çš®é€‰æ‹©é¡¹
            const operatorSkins = getMultiselectValues('operatorSkins');
            
            // åˆå¹¶çš®è‚¤ä¿¡æ¯
            let combinedSkins = '';
            if (knifeSkins.length > 0 || operatorSkins.length > 0) {
                const skinParts = [];
                if (knifeSkins.length > 0) {
                    skinParts.push(knifeSkins.join('ã€'));
                }
                if (operatorSkins.length > 0) {
                    skinParts.push(operatorSkins.join('ã€'));
                }
                combinedSkins = skinParts.join('ã€');
            }
            

            // æŒ‰ç…§æŒ‡å®šé¡ºåºå®šä¹‰å­—æ®µ
            const orderedFields = [
                { key: 'hafuCoin', label: 'å“ˆå¤«å¸çº¯å¸(å•ä½Mï¼Œ1M=100W)' },
                { key: 'rank', label: 'æ®µä½' },
                { key: 'level', label: 'ç­‰çº§' },
                { key: 'insuranceSlots', label: 'ä¿é™©æ ¼æ•°' },
                { key: 'stamina', label: 'ä½“åŠ›(è®­ç»ƒä¸­å¿ƒ)' },
                { key: 'weight', label: 'è´Ÿé‡(é¶åœºç­‰çº§)' },
                { key: 'awm', label: 'AWMå­å¼¹æ•°é‡' },
                { key: 'helmet6', label: '6å¤´æ•°é‡' },
                { key: 'armor6', label: '6ç”²æ•°é‡' },
                { key: 'skins', label: 'çš®è‚¤ï¼ˆåˆ€çš®+å¹²å‘˜çº¢çš®ï¼‰', customValue: combinedSkins },
                { key: 'kd', label: 'ç»å¯†KD' },
                { key: 'deposit', label: 'æŠ¼é‡‘ï¼ˆç§Ÿå®¢ç¼´çº³ï¼Œå°å·èµ”å¿ç”¨ï¼‰' },
                { key: 'onlineTime', label: 'å·ä¸»åœ¨çº¿æ—¶é—´ï¼ˆéœ€é…åˆäººè„¸éªŒè¯ï¼ï¼‰' },
                { key: 'banRecord', label: 'å°ç¦è®°å½•(æ²¡æœ‰å¯ä¸å¡«å†™)' },
                { key: 'rentalDays', label: 'ç§ŸæœŸï¼ˆå¤©ï¼‰' },
                { key: 'loginMethod', label: 'ä¸Šå·æ–¹å¼' },
                { key: 'phone', label: 'è”ç³»ç”µè¯' },
                { key: 'ratio', label: 'å›æ”¶æ¯”ä¾‹' },
                { key: 'rent', label: 'å›æ”¶ç§Ÿé‡‘' }
            ];
            
            // æŒ‰ç…§æŒ‡å®šé¡ºåºæ„å»ºå¤åˆ¶å†…å®¹
            orderedFields.forEach(field => {
                if (field.customValue !== undefined) {
                    value = field.customValue;
                } else {
                    value = formData.get(field.key) || '';
                }
                result += `${field.label}ï¼š${value.toString().trim()}\n`;
            });
            
            // æ£€æµ‹iOSè®¾å¤‡
            const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
            
            // å°è¯•å¤åˆ¶åˆ°å‰ªåˆ‡æ¿
            if (navigator.clipboard && window.isSecureContext && !isIOS) {
                // ä½¿ç”¨ç°ä»£ Clipboard APIï¼ˆéiOSè®¾å¤‡ï¼‰
                navigator.clipboard.writeText(result).then(() => {
                    showSuccessMessage();
                }).catch(err => {
                    console.log('Clipboard APIå¤±è´¥ï¼Œä½¿ç”¨é™çº§æ–¹æ¡ˆ:', err);
                    fallbackCopyTextToClipboard(result);
                });
            } else {
                // iOSè®¾å¤‡æˆ–é™çº§æ–¹æ¡ˆ
                fallbackCopyTextToClipboard(result);
            }
            
            // è¶…æ—¶ä¿æŠ¤ï¼š5ç§’åè‡ªåŠ¨é‡ç½®çŠ¶æ€
            setTimeout(() => {
                if (window.isCopying) {
                    console.log('å¤åˆ¶æ“ä½œè¶…æ—¶ï¼Œé‡ç½®çŠ¶æ€');
                    window.isCopying = false;
                }
            }, 5000);
        }
        
        function fallbackCopyTextToClipboard(text) {
            try {
                // æ£€æµ‹iOSè®¾å¤‡
                const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
                
                if (isIOS) {
                    // iOSç‰¹æ®Šå¤„ç†
                    iosCopyToClipboard(text);
                } else {
                    // å…¶ä»–è®¾å¤‡çš„é™çº§æ–¹æ¡ˆ
                    standardFallbackCopy(text);
                }
            } catch (err) {
                console.error('é™çº§å¤åˆ¶å¤±è´¥:', err);
                // ç¡®ä¿çŠ¶æ€è¢«é‡ç½®
                window.isCopying = false;
                showManualCopyPrompt(text);
            }
        }
        
        function iosCopyToClipboard(text) {
            // iOS Safariå…¼å®¹çš„å¤åˆ¶æ–¹æ³• - ä¼˜åŒ–ç‰ˆæœ¬
            let copySuccess = false;
            let attempts = 0;
            const maxAttempts = 3;
            
            function attemptCopy() {
                attempts++;
                console.log(`iOSå¤åˆ¶å°è¯• ${attempts}/${maxAttempts}`);
                
                // æ¸…ç†ä¹‹å‰çš„å…ƒç´ 
                const existingTextArea = document.querySelector('.ios-copy-textarea');
                if (existingTextArea) {
                    document.body.removeChild(existingTextArea);
                }
                
                // åˆ›å»ºæ–°çš„textareaå…ƒç´ 
                const textArea = document.createElement('textarea');
                textArea.className = 'ios-copy-textarea';
                textArea.value = text;
                textArea.style.cssText = `
                    position: fixed;
                    left: 0;
                    top: 0;
                    width: 2em;
                    height: 2em;
                    padding: 0;
                    border: none;
                    outline: none;
                    box-shadow: none;
                    background: transparent;
                    font-size: 16px;
                    opacity: 0;
                    pointer-events: none;
                    z-index: -1;
                `;
                textArea.setAttribute('readonly', '');
                textArea.setAttribute('aria-hidden', 'true');
                
                document.body.appendChild(textArea);
                
                // å»¶è¿Ÿæ‰§è¡Œå¤åˆ¶æ“ä½œï¼Œç¡®ä¿DOMç¨³å®š
                setTimeout(() => {
                    try {
                        // æ–¹æ³•1: ç›´æ¥execCommand
                        textArea.focus();
                        textArea.select();
                        
                        if (document.execCommand('copy')) {
                            copySuccess = true;
                            console.log('execCommandå¤åˆ¶æˆåŠŸ');
                        } else {
                            // æ–¹æ³•2: ä½¿ç”¨selection API
                            const selection = window.getSelection();
                            const range = document.createRange();
                            range.selectNodeContents(textArea);
                            selection.removeAllRanges();
                            selection.addRange(range);
                            
                            if (document.execCommand('copy')) {
                                copySuccess = true;
                                console.log('selection APIå¤åˆ¶æˆåŠŸ');
                            }
                            
                            selection.removeAllRanges();
                        }
                        
                        // æ¸…ç†å…ƒç´ 
                        if (textArea.parentNode) {
                            textArea.parentNode.removeChild(textArea);
                        }
                        
                        if (copySuccess) {
                            showSuccessMessage();
                        } else if (attempts < maxAttempts) {
                            // é‡è¯•
                            console.log(`å¤åˆ¶å¤±è´¥ï¼Œ${100 * attempts}msåé‡è¯•...`);
                            setTimeout(attemptCopy, 100 * attempts);
                        } else {
                            // æ‰€æœ‰å°è¯•éƒ½å¤±è´¥
                            console.log('æ‰€æœ‰å¤åˆ¶å°è¯•éƒ½å¤±è´¥ï¼Œæ˜¾ç¤ºæ‰‹åŠ¨å¤åˆ¶æç¤º');
                            showManualCopyPrompt(text);
                        }
                        
                    } catch (err) {
                        console.log(`å¤åˆ¶å°è¯•${attempts}å¤±è´¥:`, err);
                        
                        // æ¸…ç†å…ƒç´ 
                        if (textArea.parentNode) {
                            textArea.parentNode.removeChild(textArea);
                        }
                        
                        if (attempts < maxAttempts) {
                            // é‡è¯•
                            setTimeout(attemptCopy, 100 * attempts);
                        } else {
                            // æ‰€æœ‰å°è¯•éƒ½å¤±è´¥
                            showManualCopyPrompt(text);
                        }
                    }
                }, 50); // 50mså»¶è¿Ÿç¡®ä¿DOMç¨³å®š
            }
            
            // å¼€å§‹ç¬¬ä¸€æ¬¡å°è¯•
            attemptCopy();
        }
        
        function standardFallbackCopy(text) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            textArea.style.top = '-999999px';
            textArea.style.fontSize = '16px'; // é˜²æ­¢iOSç¼©æ”¾
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                const copySuccess = document.execCommand('copy');
                if (copySuccess) {
                    showSuccessMessage();
                } else {
                    showManualCopyPrompt(text);
                }
            } catch (err) {
                console.error('å¤åˆ¶å¤±è´¥:', err);
                showManualCopyPrompt(text);
            }
            
            document.body.removeChild(textArea);
        }
        
        function showManualCopyPrompt(text) {
            // é‡ç½®å¤åˆ¶çŠ¶æ€
            window.isCopying = false;
            
            // åˆ›å»ºæ¨¡æ€æ¡†æ˜¾ç¤ºå¤åˆ¶å†…å®¹
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                z-index: 10000;
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 20px;
                box-sizing: border-box;
            `;
            
            const modalContent = document.createElement('div');
            modalContent.style.cssText = `
                background: white;
                padding: 25px;
                border-radius: 12px;
                max-width: 90%;
                max-height: 80%;
                overflow-y: auto;
                position: relative;
            `;
            
            const closeBtn = document.createElement('button');
            closeBtn.textContent = 'âœ•';
            closeBtn.style.cssText = `
                position: absolute;
                top: 10px;
                right: 15px;
                background: none;
                border: none;
                font-size: 20px;
                cursor: pointer;
                color: #666;
                padding: 5px;
            `;
            
            const title = document.createElement('h3');
            title.textContent = 'å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶ä»¥ä¸‹å†…å®¹ï¼š';
            title.style.cssText = `
                margin: 0 0 15px 0;
                color: #333;
                font-size: 16px;
            `;
            
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.cssText = `
                width: 100%;
                min-height: 200px;
                padding: 12px;
                border: 2px solid #e8f5e8;
                border-radius: 8px;
                font-family: monospace;
                font-size: 14px;
                resize: vertical;
                box-sizing: border-box;
            `;
            
            const instruction = document.createElement('p');
            instruction.textContent = 'é•¿æŒ‰ä¸Šæ–¹å†…å®¹ï¼Œé€‰æ‹©"å…¨é€‰"ï¼Œç„¶åé€‰æ‹©"å¤åˆ¶"';
            instruction.style.cssText = `
                margin: 15px 0 0 0;
                color: #666;
                font-size: 14px;
                text-align: center;
            `;
            
            closeBtn.onclick = () => document.body.removeChild(modal);
            modal.onclick = (e) => {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            };
            
            modalContent.appendChild(closeBtn);
            modalContent.appendChild(title);
            modalContent.appendChild(textArea);
            modalContent.appendChild(instruction);
            modal.appendChild(modalContent);
            document.body.appendChild(modal);
            
            // è‡ªåŠ¨èšç„¦åˆ°æ–‡æœ¬æ¡†
            textArea.focus();
            textArea.select();
        }
        
        function showSuccessMessage() {
            // é‡ç½®å¤åˆ¶çŠ¶æ€
            window.isCopying = false;
            
            // æ˜¾ç¤ºæˆåŠŸæç¤º
            const message = document.createElement('div');
            message.textContent = 'âœ… å·²æˆåŠŸå¤åˆ¶åˆ°å‰ªåˆ‡æ¿ï¼';
            message.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: rgba(76, 175, 80, 0.9);
                color: white;
                padding: 15px 25px;
                border-radius: 25px;
                font-weight: 500;
                z-index: 10000;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
                animation: slideDown 0.3s ease-out;
            `;
            
            // æ·»åŠ åŠ¨ç”»æ ·å¼
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideDown {
                    from { transform: translateX(-50%) translateY(-100%); opacity: 0; }
                    to { transform: translateX(-50%) translateY(0); opacity: 1; }
                }
            `;
            document.head.appendChild(style);
            
            document.body.appendChild(message);
            
            // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±
            setTimeout(() => {
                if (message.parentNode) {
                    message.parentNode.removeChild(message);
                }
            }, 3000);
        }
        
        // è¡¨å•éªŒè¯å’Œå®æ—¶ä¿å­˜
        document.addEventListener('DOMContentLoaded', function() {
            // æ£€æµ‹iOSè®¾å¤‡
            const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
            
            // ä¸ºiOSè®¾å¤‡æ·»åŠ è§¦æ‘¸äº‹ä»¶æ”¯æŒ
            if (isIOS) {
                const copyBtn = document.querySelector('.copy-btn');
                if (copyBtn) {
                    // ç§»é™¤onclickï¼Œä½¿ç”¨addEventListener
                    copyBtn.removeAttribute('onclick');
                    
                    let isProcessing = false;
                    let touchStartTime = 0;
                    let touchTimeout = null;
                    
                    // è§¦æ‘¸å¼€å§‹
                    copyBtn.addEventListener('touchstart', function(e) {
                        if (isProcessing) {
                            e.preventDefault();
                            return;
                        }
                        
                        touchStartTime = Date.now();
                        this.style.transform = 'scale(0.95)';
                        
                        // è®¾ç½®è§¦æ‘¸è¶…æ—¶ï¼Œé˜²æ­¢é•¿æŒ‰
                        touchTimeout = setTimeout(() => {
                            this.style.transform = '';
                        }, 500);
                        
                    }, { passive: false });
                    
                    // è§¦æ‘¸ç»“æŸ
                    copyBtn.addEventListener('touchend', function(e) {
                        if (isProcessing) {
                            e.preventDefault();
                            return;
                        }
                        
                        const touchDuration = Date.now() - touchStartTime;
                        
                        // æ¸…ç†è§¦æ‘¸è¶…æ—¶
                        if (touchTimeout) {
                            clearTimeout(touchTimeout);
                            touchTimeout = null;
                        }
                        
                        // æ¢å¤æŒ‰é’®çŠ¶æ€
                        this.style.transform = '';
                        
                        // æ£€æŸ¥è§¦æ‘¸æ—¶é•¿ï¼Œé¿å…é•¿æŒ‰è¯¯è§¦
                        if (touchDuration > 50 && touchDuration < 500) {
                            // é˜²æ­¢é‡å¤è§¦å‘
                            isProcessing = true;
                            
                            // æ·»åŠ è§†è§‰åé¦ˆ
                            this.style.opacity = '0.7';
                            
                            // æ‰§è¡Œå¤åˆ¶æ“ä½œ
                            setTimeout(() => {
                                copyToClipboard();
                                
                                // å»¶è¿Ÿæ¢å¤çŠ¶æ€
                                setTimeout(() => {
                                    isProcessing = false;
                                    this.style.opacity = '';
                                }, 1000);
                            }, 100);
                        }
                        
                    }, { passive: false });
                    
                    // è§¦æ‘¸å–æ¶ˆ
                    copyBtn.addEventListener('touchcancel', function(e) {
                        if (touchTimeout) {
                            clearTimeout(touchTimeout);
                            touchTimeout = null;
                        }
                        this.style.transform = '';
                    }, { passive: false });
                    
                    // ç‚¹å‡»äº‹ä»¶ï¼ˆä½œä¸ºå¤‡ç”¨ï¼‰
                    copyBtn.addEventListener('click', function(e) {
                        if (isProcessing) {
                            e.preventDefault();
                            return;
                        }
                        
                        // é˜²æ­¢é‡å¤è§¦å‘
                        isProcessing = true;
                        this.style.opacity = '0.7';
                        
                        setTimeout(() => {
                            copyToClipboard();
                            
                            setTimeout(() => {
                                isProcessing = false;
                                this.style.opacity = '';
                            }, 1000);
                        }, 100);
                    });
                }
            }
            
            const inputs = document.querySelectorAll('input, textarea, select');
            
            inputs.forEach(input => {
                // å®æ—¶ä¿å­˜åˆ°localStorageï¼ˆä½†ä¸æ¢å¤ï¼‰
                input.addEventListener('input', function() {
                    localStorage.setItem(this.name, this.value);
                });
                
                // ä¸ºå¤šé€‰æ¡†æ·»åŠ changeäº‹ä»¶ç›‘å¬
                if (input.type === 'select-multiple' || input.multiple) {
                    input.addEventListener('change', function() {
                        const selectedValues = Array.from(this.selectedOptions).map(option => option.value);
                        localStorage.setItem(this.name, JSON.stringify(selectedValues));
                    });
                }
            });
            
            // åˆå§‹åŒ–è‡ªå®šä¹‰å¤šé€‰æ¡†
            document.querySelectorAll('.custom-multiselect').forEach(multiselect => {
                updateMultiselectDisplay(multiselect);
            });
            
            // åˆå§‹åŒ–æ—¶è®¡ç®—ä¸€æ¬¡æ¯”ä¾‹å’Œç§ŸæœŸ
            calculateRatio();
            calculateRentalDays();
            setTimeout(calculateRent, 100);
            
            // å“ˆå¤«å¸è¾“å…¥é™åˆ¶
            const hafuCoinInput = document.getElementById('hafuCoin');
            hafuCoinInput.addEventListener('input', function() {
                let value = this.value;
                
                // åªå…è®¸æ•°å­—å’Œå°æ•°ç‚¹
                value = value.replace(/[^0-9.]/g, '');
                
                // é˜²æ­¢å¤šä¸ªå°æ•°ç‚¹
                value = value.replace(/(\..*)\./g, '$1');
                
                // é™åˆ¶å°æ•°ç‚¹ååªèƒ½æœ‰1ä½
                if (value.includes('.')) {
                    const parts = value.split('.');
                    if (parts[1] && parts[1].length > 1) {
                        value = parts[0] + '.' + parts[1].substring(0, 1);
                    }
                }
                
                this.value = value;
            });
            
            // ç»å¯†KDè¾“å…¥é™åˆ¶
            const kdInput = document.getElementById('kd');
            kdInput.addEventListener('input', function() {
                let value = this.value;
                
                // åªå…è®¸æ•°å­—å’Œå°æ•°ç‚¹
                value = value.replace(/[^0-9.]/g, '');
                
                // é˜²æ­¢å¤šä¸ªå°æ•°ç‚¹
                value = value.replace(/(\..*)\./g, '$1');
                
                // é™åˆ¶å°æ•°ç‚¹ååªèƒ½æœ‰1ä½
                if (value.includes('.')) {
                    const parts = value.split('.');
                    if (parts[1] && parts[1].length > 1) {
                        value = parts[0] + '.' + parts[1].substring(0, 1);
                    }
                }
                
                this.value = value;
            });
            
            // æ•´æ•°è¾“å…¥é™åˆ¶ï¼ˆç­‰çº§ã€ä½“åŠ›ã€è´Ÿé‡ã€AWMã€6å¤´ã€6ç”²ï¼‰
            const integerInputs = ['level', 'stamina', 'weight', 'awm', 'helmet6', 'armor6'];
            integerInputs.forEach(inputId => {
                const input = document.getElementById(inputId);
                input.addEventListener('input', function() {
                    // åªå…è®¸è¾“å…¥æ•°å­—
                    this.value = this.value.replace(/[^0-9]/g, '');
                });
            });
            
            // æŠ¼é‡‘è¾“å…¥é™åˆ¶ï¼ˆåªèƒ½è¾“å…¥æ•°å­—ï¼Œä¸é™åˆ¶å°æ•°ä½æ•°ï¼‰
            const depositInput = document.getElementById('deposit');
            depositInput.addEventListener('input', function() {
                // åªå…è®¸è¾“å…¥æ•°å­—å’Œå°æ•°ç‚¹
                this.value = this.value.replace(/[^0-9.]/g, '');
                
                // é˜²æ­¢å¤šä¸ªå°æ•°ç‚¹
                this.value = this.value.replace(/(\..*)\./g, '$1');
            });
            
            // æ¯”ä¾‹è®¡ç®—é€»è¾‘
            function calculateRatio() {
                const insuranceSlots = document.getElementById('insuranceSlots').value;
                const stamina = document.getElementById('stamina').value;
                const weight = document.getElementById('weight').value;
                const hafuCoin = document.getElementById('hafuCoin').value;
                const ratioInput = document.getElementById('ratio');
                
                // æ£€æŸ¥æ˜¯å¦æ‰€æœ‰å¿…è¦å­—æ®µéƒ½å·²å¡«å†™
                if (!insuranceSlots || !stamina || !weight) {
                    ratioInput.value = '';
                    return;
                }
                
                // æ„å»ºæŸ¥è¯¢é”®
                const key = insuranceSlots + stamina + weight;
                console.log(key);
                
                
				// æ¯”ä¾‹å¯¹åº”è¡¨
                const ratioTable = {
                    '977': '1:33.5', '976': '1:34', '975': '1:34', '974': '1:34.5', '973': '1:35',
                    '967': '1:34', '966': '1:34', '965': '1:34.5', '964': '1:34.5', '963': '1:35',
                    '957': '1:34.5', '956': '1:35', '955': '1:35', '954': '1:35.5', '953': '1:35.5',
                    '947': '1:35.5', '946': '1:35.5', '945': '1:36', '944': '1:36', '943': '1:36',
                    '937': '1:36', '936': '1:36', '935': '1:36.5', '934': '1:36.5', '933': '1:36.5',
                    '677': '1:36', '676': '1:36', '675': '1:37', '674': '1:37', '673': '1:37',
                    '667': '1:36', '666': '1:36.5', '665': '1:36.5', '664': '1:36.5', '663': '1:36.5',
                    '657': '1:37', '656': '1:37', '655': '1:37', '654': '1:37', '653': '1:37',
                    '647': '1:37.5', '646': '1:37.5', '645': '1:37.5', '644': '1:37.5', '643': '1:37.5',
                    '637': '1:37.5', '636': '1:37.5', '635': '1:37.5', '634': '1:37.5', '633': '1:37.5',
                    '477': '1:37', '476': '1:37', '475': '1:37', '474': '1:37', '473': '1:37.5',
                    '467': '1:37.5', '466': '1:37.5', '465': '1:37.5', '464': '1:37.5', '463': '1:37.5',
                    '457': '1:38', '456': '1:38', '455': '1:39', '454': '1:38', '453': '1:38',
                    '447': '1:38.5', '446': '1:38.5', '445': '1:38.5', '444': '1:38.5', '443': '1:38.5', 
                    '442': '1:38.5', '433': '1:38.5'
                };
                
                // æŸ¥æ‰¾å¯¹åº”çš„æ¯”ä¾‹
                let ratio = ratioTable[key];
                if (!ratio) {
                    // å¦‚æœæœªæ‰¾åˆ°å¯¹åº”æ¯”ä¾‹ï¼Œæ ¹æ®ä¿é™©æ ¼æ•°è®¾ç½®é»˜è®¤æ¯”ä¾‹
                    const defaultRatioTable = {
                        '2': '1:42',
                        '4': '1:40',
                        '6': '1:38.5',
                        '9': '1:37'
                    };
                    ratio = defaultRatioTable[insuranceSlots];
                    if (!ratio) {
                        ratioInput.value = 'æœªæ‰¾åˆ°å¯¹åº”æ¯”ä¾‹';
                        return;
                    }
                }
                
                // æ ¹æ®å“ˆå¤«å¸æ•°é‡è°ƒæ•´æ¯”ä¾‹
                if (hafuCoin && parseFloat(hafuCoin) > 0) {
                    const hafuCoinValue = parseFloat(hafuCoin);
                    
                    // å¦‚æœå“ˆå¤«å¸å°äº130ï¼Œæˆ–è€…æœªå¡«å†™æ—¶ï¼Œåˆ™æ¯”ä¾‹è¿˜æ˜¯æŒ‰åŸæ¥çš„æ¯”ä¾‹
                    if (hafuCoinValue >= 130) {
                        // ä»æ¯”ä¾‹ä¸­æå–å³è¾¹çš„æ•°å­—
                        const ratioMatch = ratio.match(/1:(\d+(?:\.\d+)?)/);
                        if (ratioMatch) {
                            let ratioValue = parseFloat(ratioMatch[1]);
                            
                            if (hafuCoinValue >= 230) {
                                // å¦‚æœå“ˆå¤«å¸å¤§äº230ï¼Œåˆ™æ¯”ä¾‹å³è¾¹è¦åŠ 1.5
                                ratioValue += 1.5;
                            } else if (hafuCoinValue >= 130) {
                                // å¦‚æœå“ˆå¤«å¸å¤§äº130ï¼Œåˆ™æ¯”ä¾‹å³è¾¹è¦åŠ 1
                                ratioValue += 1;
                            }
                            
                            // é‡æ–°æ„å»ºæ¯”ä¾‹å­—ç¬¦ä¸²
                            ratio = '1:' + ratioValue;
                        }
                    }
                }
                
                // æ£€æŸ¥çš®è‚¤é€‰æ‹©æƒ…å†µå¹¶è°ƒæ•´æ¯”ä¾‹
                const knifeSkins = getMultiselectValues('knifeSkins');
                const operatorSkins = getMultiselectValues('operatorSkins');
                
                console.log('è®¡ç®—æ¯”ä¾‹ - çš®è‚¤é€‰æ‹©æƒ…å†µ:', {
                    knifeSkins: knifeSkins,
                    operatorSkins: operatorSkins,
                    beforeAdjustment: ratio
                });
                
                // ä»æ¯”ä¾‹ä¸­æå–å³è¾¹çš„æ•°å­—è¿›è¡Œçš®è‚¤è°ƒæ•´
                const finalRatioMatch = ratio.match(/1:(\d+(?:\.\d+)?)/); 
                if (finalRatioMatch) {
                    let finalRatioValue = parseFloat(finalRatioMatch[1]);
                    let adjustments = [];
                    
                    // å¦‚æœé€‰æ‹©äº†åˆ€çš®ï¼Œæ¯”ä¾‹å³è¾¹å‡1
                    if (knifeSkins.length > 0) {
                        finalRatioValue -= 1;
                        adjustments.push('åˆ€çš®-1');
                    }
                    
                    // å¦‚æœé€‰æ‹©äº†å¹²å‘˜çº¢çš®ï¼Œæ¯”ä¾‹å³è¾¹å‡1
                    if (operatorSkins.length > 0) {
                        finalRatioValue -= 1;
                        adjustments.push('å¹²å‘˜çº¢çš®-1');
                    }
                    
                    // ç¡®ä¿æ¯”ä¾‹ä¸ä¼šå˜æˆè´Ÿæ•°æˆ–è¿‡å°
                    if (finalRatioValue < 1) {
                        finalRatioValue = 1;
                        adjustments.push('æœ€å°å€¼é™åˆ¶ä¸º1');
                    }
                    
                    // é‡æ–°æ„å»ºæœ€ç»ˆæ¯”ä¾‹å­—ç¬¦ä¸²
                    ratio = '1:' + finalRatioValue;
                    
                    console.log('æ¯”ä¾‹è°ƒæ•´ç»“æœ:', {
                        adjustments: adjustments,
                        finalRatio: ratio
                    });
                }
                
                ratioInput.value = ratio;
            }
            
            // ä¸ºç›¸å…³å­—æ®µæ·»åŠ æ¯”ä¾‹å’Œç§ŸæœŸè®¡ç®—ç›‘å¬å™¨
            const ratioRelatedInputs = ['insuranceSlots', 'stamina', 'weight', 'hafuCoin'];
            ratioRelatedInputs.forEach(inputId => {
                const input = document.getElementById(inputId);
                input.addEventListener('input', function() {
                    calculateRatio();
                    // å»¶è¿Ÿä¸€ç‚¹æ—¶é—´ç¡®ä¿æ¯”ä¾‹å­—æ®µå·²æ›´æ–°ï¼Œç„¶åè®¡ç®—ç§Ÿé‡‘
                    setTimeout(calculateRent, 100);
                    // å¦‚æœæ˜¯å“ˆå¤«å¸å­—æ®µï¼ŒåŒæ—¶è®¡ç®—ç§ŸæœŸ
                    if (inputId === 'hafuCoin') {
                        calculateRentalDays();
                    }
                });
                input.addEventListener('change', function() {
                    calculateRatio();
                    // å»¶è¿Ÿä¸€ç‚¹æ—¶é—´ç¡®ä¿æ¯”ä¾‹å­—æ®µå·²æ›´æ–°ï¼Œç„¶åè®¡ç®—ç§Ÿé‡‘
                    setTimeout(calculateRent, 100);
                    // å¦‚æœæ˜¯å“ˆå¤«å¸å­—æ®µï¼ŒåŒæ—¶è®¡ç®—ç§ŸæœŸ
                    if (inputId === 'hafuCoin') {
                        calculateRentalDays();
                    }
                });
            });
            
            // ä¸ºçš®è‚¤é€‰æ‹©æ¡†æ·»åŠ å˜åŒ–ç›‘å¬ï¼ˆç”¨äºäº‹ä»¶å§”æ‰˜ï¼‰
            document.addEventListener('change', function(event) {
                if (event.target.matches('.custom-multiselect input[type="checkbox"]')) {
                    // çš®è‚¤é€‰æ‹©å‘ç”Ÿå˜åŒ–ï¼Œé‡æ–°è®¡ç®—æ¯”ä¾‹
                    setTimeout(() => {
                        calculateRatio();
                        setTimeout(calculateRent, 100);
                    }, 50);
                }
            });
            
            // ç§Ÿé‡‘è®¡ç®—é€»è¾‘
            function calculateRent() {
                const hafuCoin = document.getElementById('hafuCoin').value;
                const ratio = document.getElementById('ratio').value;
                const rentInput = document.getElementById('rent');
                
                // æ£€æŸ¥æ˜¯å¦æ‰€æœ‰å¿…è¦å­—æ®µéƒ½å·²å¡«å†™
                if (!hafuCoin || !ratio) {
                    rentInput.value = '';
                    return;
                }
                
                // ä»æ¯”ä¾‹ä¸­æå–å³è¾¹çš„æ•°å­—
                const ratioMatch = ratio.match(/1:(\d+(?:\.\d+)?)/);
                if (!ratioMatch) {
                    rentInput.value = 'æ¯”ä¾‹æ ¼å¼é”™è¯¯';
                    return;
                }
                
                const ratioValue = parseFloat(ratioMatch[1]);
                const hafuCoinValue = parseFloat(hafuCoin);
                
                // è®¡ç®—ç§Ÿé‡‘ï¼šå“ˆå¤«å¸çº¯å¸/æ¯”ä¾‹å³è¾¹éƒ¨åˆ†*10000ï¼Œä¿ç•™æ•´æ•°
                const rent = Math.round(hafuCoinValue / ratioValue * 100);
                rentInput.value = rent;
            }
            
            // ä¸ºå“ˆå¤«å¸å­—æ®µæ·»åŠ ç§Ÿé‡‘è®¡ç®—ç›‘å¬å™¨
            hafuCoinInput.addEventListener('input', calculateRent);
            hafuCoinInput.addEventListener('change', calculateRent);
        });
    </script>


</body></html>